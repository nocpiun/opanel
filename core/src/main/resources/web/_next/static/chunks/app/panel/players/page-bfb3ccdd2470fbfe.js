(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{17580:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},24232:(e,t,r)=>{"use strict";r.d(t,{C:()=>x});var a=r(95155);r(12115);var n=r(13052),s=r(51907);function l(e){let{...t}=e;return(0,a.jsx)("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...t})}function o(e){let{className:t,...r}=e;return(0,a.jsx)("ol",{"data-slot":"breadcrumb-list",className:(0,s.cn)("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",t),...r})}function i(e){let{className:t,...r}=e;return(0,a.jsx)("li",{"data-slot":"breadcrumb-item",className:(0,s.cn)("inline-flex items-center gap-1.5",t),...r})}function c(e){let{className:t,...r}=e;return(0,a.jsx)("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:(0,s.cn)("text-foreground font-normal",t),...r})}function d(e){let{children:t,className:r,...l}=e;return(0,a.jsx)("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:(0,s.cn)("[&>svg]:size-3.5",r),...l,children:null!=t?t:(0,a.jsx)(n.A,{})})}var u=r(76037),f=r(71196);function x(e){let{children:t,title:r,subTitle:n,icon:x,className:g}=e;return(0,a.jsxs)("div",{className:"px-16 flex-1 flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"pt-10 pb-5 flex flex-col gap-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(f.SidebarTrigger,{className:"cursor-pointer"}),(0,a.jsx)(u.Separator,{orientation:"vertical"}),(0,a.jsx)(l,{children:(0,a.jsxs)(o,{children:[(0,a.jsx)(i,{children:"OPanel"}),(0,a.jsx)(d,{}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i,{children:r}),(0,a.jsx)(d,{})]}),(0,a.jsx)(i,{children:(0,a.jsx)(c,{children:null!=n?n:r})})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-5",children:[x,(0,a.jsx)("h1",{className:"text-3xl font-bold",children:null!=n?n:r})]})]}),(0,a.jsx)("div",{className:(0,s.cn)(g,"pb-16"),children:t})]})}},29646:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eo});var a=r(95155),n=r(12115),s=r(17580),l=r(56671),o=r(24232),i=r(85185),c=r(46081),d=r(37328),u=r(6101),f=r(61285),x=r(63655),g=r(39033),m=r(5845),h=r(94315),p="rovingFocusGroup.onEntryFocus",v={bubbles:!1,cancelable:!0},b="RovingFocusGroup",[j,y,w]=(0,d.N)(b),[N,k]=(0,c.A)(b,[w]),[C,A]=N(b),F=n.forwardRef((e,t)=>(0,a.jsx)(j.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,a.jsx)(j.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,a.jsx)(T,{...e,ref:t})})}));F.displayName=b;var T=n.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:s,loop:l=!1,dir:o,currentTabStopId:c,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:f,onEntryFocus:j,preventScrollOnEntryFocus:w=!1,...N}=e,k=n.useRef(null),A=(0,u.s)(t,k),F=(0,h.jH)(o),[T,P]=(0,m.i)({prop:c,defaultProp:null!=d?d:null,onChange:f,caller:b}),[I,R]=n.useState(!1),S=(0,g.c)(j),K=y(r),E=n.useRef(!1),[M,V]=n.useState(0);return n.useEffect(()=>{let e=k.current;if(e)return e.addEventListener(p,S),()=>e.removeEventListener(p,S)},[S]),(0,a.jsx)(C,{scope:r,orientation:s,dir:F,loop:l,currentTabStopId:T,onItemFocus:n.useCallback(e=>P(e),[P]),onItemShiftTab:n.useCallback(()=>R(!0),[]),onFocusableItemAdd:n.useCallback(()=>V(e=>e+1),[]),onFocusableItemRemove:n.useCallback(()=>V(e=>e-1),[]),children:(0,a.jsx)(x.sG.div,{tabIndex:I||0===M?-1:0,"data-orientation":s,...N,ref:A,style:{outline:"none",...e.style},onMouseDown:(0,i.m)(e.onMouseDown,()=>{E.current=!0}),onFocus:(0,i.m)(e.onFocus,e=>{let t=!E.current;if(e.target===e.currentTarget&&t&&!I){let t=new CustomEvent(p,v);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=K().filter(e=>e.focusable);D([e.find(e=>e.active),e.find(e=>e.id===T),...e].filter(Boolean).map(e=>e.ref.current),w)}}E.current=!1}),onBlur:(0,i.m)(e.onBlur,()=>R(!1))})})}),P="RovingFocusGroupItem",I=n.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:s=!0,active:l=!1,tabStopId:o,children:c,...d}=e,u=(0,f.B)(),g=o||u,m=A(P,r),h=m.currentTabStopId===g,p=y(r),{onFocusableItemAdd:v,onFocusableItemRemove:b,currentTabStopId:w}=m;return n.useEffect(()=>{if(s)return v(),()=>b()},[s,v,b]),(0,a.jsx)(j.ItemSlot,{scope:r,id:g,focusable:s,active:l,children:(0,a.jsx)(x.sG.span,{tabIndex:h?0:-1,"data-orientation":m.orientation,...d,ref:t,onMouseDown:(0,i.m)(e.onMouseDown,e=>{s?m.onItemFocus(g):e.preventDefault()}),onFocus:(0,i.m)(e.onFocus,()=>m.onItemFocus(g)),onKeyDown:(0,i.m)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void m.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var a;let n=(a=e.key,"rtl"!==r?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(n))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)))return R[n]}(e,m.orientation,m.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let a=r.indexOf(e.currentTarget);r=m.loop?function(e,t){return e.map((r,a)=>e[(t+a)%e.length])}(r,a+1):r.slice(a+1)}setTimeout(()=>D(r))}}),children:"function"==typeof c?c({isCurrentTabStop:h,hasTabStop:null!=w}):c})})});I.displayName=P;var R={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function D(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=document.activeElement;for(let a of e)if(a===r||(a.focus({preventScroll:t}),document.activeElement!==r))return}var S=r(28905),K="Tabs",[E,M]=(0,c.A)(K,[k]),V=k(),[_,O]=E(K),G=n.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,onValueChange:s,defaultValue:l,orientation:o="horizontal",dir:i,activationMode:c="automatic",...d}=e,u=(0,h.jH)(i),[g,p]=(0,m.i)({prop:n,onChange:s,defaultProp:null!=l?l:"",caller:K});return(0,a.jsx)(_,{scope:r,baseId:(0,f.B)(),value:g,onValueChange:p,orientation:o,dir:u,activationMode:c,children:(0,a.jsx)(x.sG.div,{dir:u,"data-orientation":o,...d,ref:t})})});G.displayName=K;var z="TabsList",B=n.forwardRef((e,t)=>{let{__scopeTabs:r,loop:n=!0,...s}=e,l=O(z,r),o=V(r);return(0,a.jsx)(F,{asChild:!0,...o,orientation:l.orientation,dir:l.dir,loop:n,children:(0,a.jsx)(x.sG.div,{role:"tablist","aria-orientation":l.orientation,...s,ref:t})})});B.displayName=z;var H="TabsTrigger",L=n.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,disabled:s=!1,...l}=e,o=O(H,r),c=V(r),d=$(o.baseId,n),u=J(o.baseId,n),f=n===o.value;return(0,a.jsx)(I,{asChild:!0,...c,focusable:!s,active:f,children:(0,a.jsx)(x.sG.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...l,ref:t,onMouseDown:(0,i.m)(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(n)}),onKeyDown:(0,i.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(n)}),onFocus:(0,i.m)(e.onFocus,()=>{let e="manual"!==o.activationMode;f||s||!e||o.onValueChange(n)})})})});L.displayName=H;var q="TabsContent",X=n.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,forceMount:l,children:o,...i}=e,c=O(q,r),d=$(c.baseId,s),u=J(c.baseId,s),f=s===c.value,g=n.useRef(f);return n.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(S.C,{present:l||f,children:r=>{let{present:n}=r;return(0,a.jsx)(x.sG.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!n,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:g.current?"0s":void 0},children:n&&o})}})});function $(e,t){return"".concat(e,"-trigger-").concat(t)}function J(e,t){return"".concat(e,"-content-").concat(t)}X.displayName=q;var U=r(51907);function W(e){let{className:t,...r}=e;return(0,a.jsx)(G,{"data-slot":"tabs",className:(0,U.cn)("flex flex-col gap-2",t),...r})}function Z(e){let{className:t,...r}=e;return(0,a.jsx)(B,{"data-slot":"tabs-list",className:(0,U.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...r})}function Q(e){let{className:t,...r}=e;return(0,a.jsx)(L,{"data-slot":"tabs-trigger",className:(0,U.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function Y(e){let{className:t,...r}=e;return(0,a.jsx)(X,{"data-slot":"tabs-content",className:(0,U.cn)("flex-1 outline-none",t),...r})}var ee=r(5196),et=r(88145),er=r(37777);let ea=[{accessorKey:"name",header:"玩家名",cell:e=>{let{row:t}=e;return(0,a.jsxs)(er.m_,{children:[(0,a.jsx)(er.k$,{children:(0,a.jsx)("span",{className:"font-semibold",children:t.getValue("name")})}),(0,a.jsx)(er.ZI,{children:t.getValue("uuid")})]})}},{accessorKey:"uuid",header:"",cell:""},{accessorKey:"isOnline",header:()=>(0,a.jsx)("div",{className:"text-center",children:"状态"}),cell:e=>{let{row:t}=e,r=t.getValue("isOnline");return(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)(et.E,{variant:"outline",children:[(0,a.jsx)("div",{className:(0,U.cn)("w-2 h-2 rounded-full",r?"bg-green-600":"bg-muted-foreground")}),r?"在线":"离线"]})})}},{accessorKey:"gamemode",header:()=>(0,a.jsx)("div",{className:"text-center",children:"游戏模式"}),cell:e=>{let{row:t}=e,r=t.getValue("gamemode");return r?(0,a.jsx)("div",{className:"text-center",children:(0,U.rB)(r)}):(0,a.jsx)(a.Fragment,{})}},{accessorKey:"isOp",header:"OP",cell:e=>{let{row:t}=e;return t.getValue("isOp")?(0,a.jsx)(ee.A,{size:18,color:"var(--color-muted-foreground)"}):(0,a.jsx)(a.Fragment,{})}},{header:" ",cell:()=>{}}],en=[{accessorKey:"name",header:"玩家名",cell:e=>{let{row:t}=e;return(0,a.jsx)("span",{className:"font-semibold",children:t.getValue("name")})}},{accessorKey:"isOp",header:"OP",cell:e=>{let{row:t}=e;return t.getValue("isOp")?(0,a.jsx)(ee.A,{size:18,color:"var(--color-muted-foreground)"}):(0,a.jsx)(a.Fragment,{})}},{header:" ",cell:()=>{}}];var es=r(62108),el=r(31886);function eo(){let[e,t]=(0,n.useState)([]),[r,i]=(0,n.useState)(0),[c,d]=(0,n.useState)("player-list"),u=async()=>{try{let e=await (0,el.qV)("/api/players");t(e.players),i(e.maxPlayerCount)}catch(e){l.oR.error("无法获取玩家列表")}};return(0,n.useEffect)(()=>{u()},[]),(0,a.jsx)(o.C,{title:"玩家",subTitle:"player-list"===c?"玩家列表":"封禁列表",icon:(0,a.jsx)(s.A,{}),children:(0,a.jsxs)(W,{defaultValue:"player-list",onValueChange:d,children:[(0,a.jsxs)(Z,{className:"[&>*]:cursor-pointer",children:[(0,a.jsx)(Q,{value:"player-list",children:"玩家列表 (".concat(e.filter(e=>{let{isOnline:t}=e;return t}).length," / ").concat(r,")")}),(0,a.jsx)(Q,{value:"banned-list",children:"封禁列表 (".concat(e.filter(e=>{let{isBanned:t}=e;return t}).length,")")})]}),(0,a.jsx)(Y,{value:"player-list",children:(0,a.jsx)(es.b,{columns:ea,data:e,pagination:!0,fallbackMessage:"暂无玩家"})}),(0,a.jsx)(Y,{value:"banned-list",children:(0,a.jsx)(es.b,{columns:en,data:e.filter(e=>{let{isBanned:t}=e;return t}),pagination:!0,fallbackMessage:"暂无玩家"})})]})})}},31886:(e,t,r)=>{"use strict";r.d(t,{$M:()=>i,nl:()=>d,ow:()=>c,qV:()=>o,y0:()=>s,yq:()=>l});var a=r(23464),n=r(16453);let s="",l=globalThis.window?"ws://".concat(window.location.host):"ws://localhost:3000";async function o(e){return(await a.A.request({method:"get",url:s+e,headers:{"X-Credential-Token":(0,n.getCookie)("token")}})).data}async function i(e,t){let r=t?JSON.stringify(t):"";return(await a.A.request({method:"post",maxBodyLength:1/0,url:s+e,headers:{"Content-Type":"text/plain"},data:r})).data}async function c(e,t){let r=t?JSON.stringify(t):"";return(await a.A.request({method:"post",maxBodyLength:1/0,url:s+e,headers:{"Content-Type":"text/plain","X-Credential-Token":(0,n.getCookie)("token")},data:r})).data}async function d(e,t){let r=t?JSON.stringify(t):"";return(await a.A.request({method:"delete",maxBodyLength:1/0,url:s+e,headers:{"Content-Type":"text/plain","X-Credential-Token":(0,n.getCookie)("token")},data:r})).data}},53571:(e,t,r)=>{Promise.resolve().then(r.bind(r,29646))},62108:(e,t,r)=>{"use strict";r.d(t,{b:()=>g});var a=r(95155),n=r(12115),s=r(52278),l=r(42355),o=r(13052),i=r(12767),c=r(36268),d=r(11032),u=r(88524),f=r(51907),x=r(97168);function g(e){var t;let{columns:r,data:g,pagination:m,fallbackMessage:h,className:p}=e,[v,b]=(0,n.useState)({pageIndex:0,pageSize:10}),j=(0,c.N4)({columns:r,data:g,getCoreRowModel:(0,d.HT)(),getPaginationRowModel:m?(0,d.kW)():void 0,onPaginationChange:b,state:{pagination:v}});return(0,a.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,a.jsx)("div",{className:(0,f.cn)(p,"border rounded-md"),children:(0,a.jsxs)(u.XI,{children:[(0,a.jsx)(u.A0,{children:j.getHeaderGroups().map(e=>(0,a.jsx)(u.Hj,{children:e.headers.map(e=>(0,a.jsx)(u.nd,{children:e.isPlaceholder?null:(0,c.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)(u.BF,{children:(null==(t=j.getRowModel().rows)?void 0:t.length)?j.getRowModel().rows.map(e=>(0,a.jsx)(u.Hj,{children:e.getVisibleCells().map(e=>(0,a.jsx)(u.nA,{children:(0,c.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(u.Hj,{className:"hover:bg-transparent",children:(0,a.jsx)(u.nA,{colSpan:r.length,className:"h-24 text-center",children:null!=h?h:"暂无数据"})})})]})}),m&&(0,a.jsxs)("div",{className:"flex gap-3 items-center [&>button]:cursor-pointer",children:[(0,a.jsx)(x.$,{variant:"outline",size:"icon",title:"跳转至第一页",onClick:()=>j.firstPage(),disabled:!j.getCanPreviousPage(),children:(0,a.jsx)(s.A,{})}),(0,a.jsxs)(x.$,{variant:"outline",onClick:()=>j.previousPage(),disabled:!j.getCanPreviousPage(),children:[(0,a.jsx)(l.A,{}),"上一页"]}),(0,a.jsxs)(x.$,{variant:"outline",onClick:()=>j.nextPage(),disabled:!j.getCanNextPage(),children:["下一页",(0,a.jsx)(o.A,{})]}),(0,a.jsx)(x.$,{variant:"outline",size:"icon",title:"跳转至最后一页",onClick:()=>j.lastPage(),disabled:!j.getCanNextPage(),children:(0,a.jsx)(i.A,{})}),(0,a.jsxs)("span",{className:"text-muted-foreground text-sm",children:["第 ",v.pageIndex+1," 页 / 共 ",j.getPageCount()," 页"]})]})]})}},88145:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var a=r(95155);r(12115);var n=r(99708),s=r(74466),l=r(51907);let o=(0,s.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,asChild:s=!1,...i}=e,c=s?n.DX:"span";return(0,a.jsx)(c,{"data-slot":"badge",className:(0,l.cn)(o({variant:r}),t),...i})}},88524:(e,t,r)=>{"use strict";r.d(t,{A0:()=>l,BF:()=>o,Hj:()=>i,XI:()=>s,nA:()=>d,nd:()=>c});var a=r(95155);r(12115);var n=r(51907);function s(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,n.cn)("w-full caption-bottom text-sm",t),...r})})}function l(e){let{className:t,...r}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,n.cn)("[&_tr]:border-b",t),...r})}function o(e){let{className:t,...r}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,n.cn)("[&_tr:last-child]:border-0",t),...r})}function i(e){let{className:t,...r}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,n.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...r})}function c(e){let{className:t,...r}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,n.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}function d(e){let{className:t,...r}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,n.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}}},e=>{var t=t=>e(e.s=t);e.O(0,[455,370,702,671,464,872,387,196,441,684,358],()=>t(53571)),_N_E=e.O()}]);