(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{24232:(e,t,a)=>{"use strict";a.d(t,{C:()=>h});var n=a(95155);a(12115);var s=a(13052),r=a(51907);function l(e){let{...t}=e;return(0,n.jsx)("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...t})}function i(e){let{className:t,...a}=e;return(0,n.jsx)("ol",{"data-slot":"breadcrumb-list",className:(0,r.cn)("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",t),...a})}function c(e){let{className:t,...a}=e;return(0,n.jsx)("li",{"data-slot":"breadcrumb-item",className:(0,r.cn)("inline-flex items-center gap-1.5",t),...a})}function o(e){let{className:t,...a}=e;return(0,n.jsx)("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:(0,r.cn)("text-foreground font-normal",t),...a})}function d(e){let{children:t,className:a,...l}=e;return(0,n.jsx)("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:(0,r.cn)("[&>svg]:size-3.5",a),...l,children:null!=t?t:(0,n.jsx)(s.A,{})})}var u=a(76037),x=a(71196);function h(e){let{children:t,title:a,subTitle:s,icon:h,className:g}=e;return(0,n.jsxs)("div",{className:"px-16 flex-1 flex flex-col gap-6",children:[(0,n.jsxs)("div",{className:"pt-10 pb-5 flex flex-col gap-8",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(x.SidebarTrigger,{className:"cursor-pointer"}),(0,n.jsx)(u.Separator,{orientation:"vertical"}),(0,n.jsx)(l,{children:(0,n.jsxs)(i,{children:[(0,n.jsx)(c,{children:"OPanel"}),(0,n.jsx)(d,{}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c,{children:a}),(0,n.jsx)(d,{})]}),(0,n.jsx)(c,{children:(0,n.jsx)(o,{children:null!=s?s:a})})]})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-5",children:[h,(0,n.jsx)("h1",{className:"text-3xl font-bold",children:null!=s?s:a})]})]}),(0,n.jsx)("div",{className:(0,r.cn)(g,"pb-16"),children:t})]})}},31886:(e,t,a)=>{"use strict";a.d(t,{$M:()=>o,Hh:()=>i,nl:()=>u,ow:()=>d,qV:()=>c,y0:()=>r,yq:()=>l});var n=a(23464),s=a(16453);let r="",l=globalThis.window?"ws://".concat(window.location.host):"ws://localhost:3000",i="https://mineskin.eu/helm/";async function c(e){return(await n.A.request({method:"get",url:r+e,headers:{"X-Credential-Token":(0,s.getCookie)("token")}})).data}async function o(e,t){let a=t?JSON.stringify(t):"";return(await n.A.request({method:"post",maxBodyLength:1/0,url:r+e,headers:{"Content-Type":"text/plain"},data:a})).data}async function d(e,t){let a=t?JSON.stringify(t):"";return(await n.A.request({method:"post",maxBodyLength:1/0,url:r+e,headers:{"Content-Type":"text/plain","X-Credential-Token":(0,s.getCookie)("token")},data:a})).data}async function u(e,t){let a=t?JSON.stringify(t):"";return(await n.A.request({method:"delete",maxBodyLength:1/0,url:r+e,headers:{"Content-Type":"text/plain","X-Credential-Token":(0,s.getCookie)("token")},data:a})).data}},32007:(e,t,a)=>{"use strict";a.d(t,{S:()=>c,f:()=>i});var n=a(42757),s=a.n(n),r=a(56671),l=a(31886);async function i(e){let t=e.endsWith(".log.gz")?e.replace(".log.gz",".log"):e;try{let a=await (0,l.qV)("/api/logs/".concat(e));s()(a.log,t,"text/plain")}catch(e){r.oR.error("下载失败",{description:"无法下载日志".concat(t)})}}async function c(e){try{await (0,l.nl)("/api/logs/".concat(e)),r.oR.success("删除成功")}catch(e){r.oR.error("删除失败")}}},69506:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var n=a(95155),s=a(12115),r=a(91788),l=a(62525),i=a(35695),c=a(56671),o=a(91364),d=a(51362),u=a(24232),x=a(31886),h=a(97168),g=a(32007);function m(){let e=(0,i.useSearchParams)(),{push:t}=(0,i.useRouter)(),[a,m]=(0,s.useState)(""),{theme:f}=(0,d.D)(),p=(0,s.useRef)(null),j=e.get("log"),b=(0,s.useCallback)(async()=>{try{let e=await (0,x.qV)("/api/logs/".concat(j));m(e.log)}catch(e){c.oR.error("无法获取日志内容")}},[j]);return(0,s.useEffect)(()=>{p.current&&p.current.setValue(a)},[a]),(0,s.useEffect)(()=>{b()},[b]),j||t("/panel/logs"),(0,n.jsxs)(u.C,{title:"日志",subTitle:null!=j?j:"",children:[(0,n.jsxs)("div",{className:"mb-3 flex justify-between items-center",children:[(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:["文件类型：",(null==j?void 0:j.endsWith(".log.gz"))?"gzip (已解压)":"log"]}),(0,n.jsxs)("div",{className:"[&>*]:cursor-pointer",children:[(0,n.jsx)(h.$,{variant:"ghost",size:"icon",title:"下载日志",onClick:()=>(0,g.f)(null!=j?j:""),children:(0,n.jsx)(r.A,{})}),(0,n.jsx)(h.$,{variant:"ghost",size:"icon",title:"删除日志",onClick:async()=>{await (0,g.S)(null!=j?j:""),t("/panel/logs")},children:(0,n.jsx)(l.A,{})})]})]}),(0,n.jsx)(o.Ay,{height:"500px",defaultLanguage:"txt",defaultValue:a,theme:"dark"===f?"vs-dark":"vs",onMount:e=>p.current=e})]})}},79701:(e,t,a)=>{Promise.resolve().then(a.bind(a,69506))}},e=>{var t=t=>e(e.s=t);e.O(0,[455,370,702,671,464,145,196,441,684,358],()=>t(79701)),_N_E=e.O()}]);