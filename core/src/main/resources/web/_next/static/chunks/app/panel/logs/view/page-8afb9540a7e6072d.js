(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{24232:(e,t,n)=>{"use strict";n.d(t,{C:()=>f});var a=n(95155);n(12115);var r=n(13052),s=n(53999);function o(e){let{...t}=e;return(0,a.jsx)("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...t})}function l(e){let{className:t,...n}=e;return(0,a.jsx)("ol",{"data-slot":"breadcrumb-list",className:(0,s.cn)("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",t),...n})}function i(e){let{className:t,...n}=e;return(0,a.jsx)("li",{"data-slot":"breadcrumb-item",className:(0,s.cn)("inline-flex items-center gap-1.5",t),...n})}function c(e){let{className:t,...n}=e;return(0,a.jsx)("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:(0,s.cn)("text-foreground font-normal",t),...n})}function d(e){let{children:t,className:n,...o}=e;return(0,a.jsx)("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:(0,s.cn)("[&>svg]:size-3.5",n),...o,children:null!=t?t:(0,a.jsx)(r.A,{})})}var u=n(76037),p=n(20193);function f(e){let{children:t,title:n,subTitle:r,icon:f,className:h}=e;return(0,a.jsxs)("div",{className:"px-16 flex-1 flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"pt-10 pb-5 flex flex-col gap-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(p.SidebarTrigger,{className:"cursor-pointer"}),(0,a.jsx)(u.Separator,{orientation:"vertical"}),(0,a.jsx)(o,{children:(0,a.jsxs)(l,{children:[(0,a.jsx)(i,{children:"OPanel"}),(0,a.jsx)(d,{}),r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i,{children:n}),(0,a.jsx)(d,{})]}),(0,a.jsx)(i,{children:(0,a.jsx)(c,{children:null!=r?r:n})})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-5",children:[f,(0,a.jsx)("h1",{className:"text-3xl font-bold",children:null!=r?r:n})]})]}),(0,a.jsx)("div",{className:(0,s.cn)(h,"pb-16"),children:t})]})}},31886:(e,t,n)=>{"use strict";n.d(t,{$M:()=>u,Hh:()=>i,nF:()=>l,nl:()=>f,ow:()=>p,qV:()=>d,v_:()=>c,y0:()=>s,yq:()=>o});var a=n(23464),r=n(16453);let s="",o=globalThis.window?"ws://".concat(window.location.host):"ws://localhost:3000",l="https://crafatar.com/avatars/",i="https://crafatar.com/skins/",c="https://crafatar.com/capes/";async function d(e){return(await a.A.request({method:"get",url:s+e,headers:{"X-Credential-Token":(0,r.getCookie)("token")}})).data}async function u(e,t){let n=t?JSON.stringify(t):"";return(await a.A.request({method:"post",maxBodyLength:1/0,url:s+e,headers:{"Content-Type":"text/plain"},data:n})).data}async function p(e,t){let n=t?JSON.stringify(t):"";return(await a.A.request({method:"post",maxBodyLength:1/0,url:s+e,headers:{"Content-Type":"text/plain","X-Credential-Token":(0,r.getCookie)("token")},data:n})).data}async function f(e,t){let n=t?JSON.stringify(t):"";return(await a.A.request({method:"delete",maxBodyLength:1/0,url:s+e,headers:{"Content-Type":"text/plain","X-Credential-Token":(0,r.getCookie)("token")},data:n})).data}},32007:(e,t,n)=>{"use strict";n.d(t,{S:()=>i,f:()=>l});var a=n(42757),r=n.n(a),s=n(56671),o=n(31886);async function l(e){let t=e.endsWith(".log.gz")?e.replace(".log.gz",".log"):e;try{let n=await (0,o.qV)("/api/logs/".concat(e));r()(n.log,t,"text/plain")}catch(e){s.oR.error("下载失败",{description:"无法下载日志".concat(t)})}}async function i(e){try{await (0,o.nl)("/api/logs/".concat(e)),s.oR.success("删除成功")}catch(e){s.oR.error("删除失败")}}},42757:function(e,t){var n,a;void 0===(a="function"==typeof(n=function(){return function e(t,n,a){var r,s,o=window,l="application/octet-stream",i=a||l,c=t,d=!n&&!a&&c,u=document.createElement("a"),p=function(e){return String(e)},f=o.Blob||o.MozBlob||o.WebKitBlob||p,h=n||"download";if(f=f.call?f.bind(o):Blob,"true"===String(this)&&(i=(c=[c,i])[0],c=c[1]),d&&d.length<2048&&(h=d.split("/").pop().split("?")[0],u.href=d,-1!==u.href.indexOf(d))){var m=new XMLHttpRequest;return m.open("GET",d,!0),m.responseType="blob",m.onload=function(t){e(t.target.response,h,l)},setTimeout(function(){m.send()},0),m}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c))if(!(c.length>2096103.424)||f===p)return navigator.msSaveBlob?navigator.msSaveBlob(b(c),h):v(c);else i=(c=b(c)).type||l;else if(/([\x80-\xff])/.test(c)){for(var x=0,g=new Uint8Array(c.length),y=g.length;x<y;++x)g[x]=c.charCodeAt(x);c=new f([g],{type:i})}function b(e){for(var t=e.split(/[:;,]/),n=t[1],a=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),r=a.length,s=0,o=new Uint8Array(r);s<r;++s)o[s]=a.charCodeAt(s);return new f([o],{type:n})}function v(e,t){if("download"in u)return u.href=e,u.setAttribute("download",h),u.className="download-js-link",u.innerHTML="downloading...",u.style.display="none",document.body.appendChild(u),setTimeout(function(){u.click(),document.body.removeChild(u),!0===t&&setTimeout(function(){o.URL.revokeObjectURL(u.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,l)),!window.open(e)&&confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,l)),n.src=e,setTimeout(function(){document.body.removeChild(n)},333)}if(r=c instanceof f?c:new f([c],{type:i}),navigator.msSaveBlob)return navigator.msSaveBlob(r,h);if(o.URL)v(o.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===p)try{return v("data:"+i+";base64,"+o.btoa(r))}catch(e){return v("data:"+i+","+encodeURIComponent(r))}(s=new FileReader).onload=function(e){v(this.result)},s.readAsDataURL(r)}return!0}})?n.apply(t,[]):n)||(e.exports=a)},62525:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(19946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},69506:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var a=n(95155),r=n(12115),s=n(91788),o=n(62525),l=n(35695),i=n(56671),c=n(91364),d=n(51362),u=n(24232),p=n(31886),f=n(97168),h=n(32007);function m(){let e=(0,l.useSearchParams)(),{push:t}=(0,l.useRouter)(),[n,m]=(0,r.useState)(""),{theme:x}=(0,d.D)(),g=(0,r.useRef)(null),y=e.get("log"),b=(0,r.useCallback)(async()=>{try{let e=await (0,p.qV)("/api/logs/".concat(y));m(e.log)}catch(e){i.oR.error("无法获取日志内容")}},[y]);return(0,r.useEffect)(()=>{g.current&&g.current.setValue(n)},[n]),(0,r.useEffect)(()=>{b()},[b]),y||t("/panel/logs"),(0,a.jsxs)(u.C,{title:"日志",subTitle:null!=y?y:"",children:[(0,a.jsxs)("div",{className:"mb-3 flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["文件类型：",(null==y?void 0:y.endsWith(".log.gz"))?"gzip (已解压)":"log"]}),(0,a.jsxs)("div",{className:"[&>*]:cursor-pointer",children:[(0,a.jsx)(f.$,{variant:"ghost",size:"icon",title:"下载日志",onClick:()=>(0,h.f)(null!=y?y:""),children:(0,a.jsx)(s.A,{})}),(0,a.jsx)(f.$,{variant:"ghost",size:"icon",title:"删除日志",onClick:async()=>{await (0,h.S)(null!=y?y:""),t("/panel/logs")},children:(0,a.jsx)(o.A,{})})]})]}),(0,a.jsx)(c.Ay,{height:"500px",defaultLanguage:"txt",defaultValue:n,theme:"dark"===x?"vs-dark":"vs",options:{readOnly:!0,readOnlyMessage:{value:"日志不可编辑"}},onMount:e=>g.current=e})]})}},79701:(e,t,n)=>{Promise.resolve().then(n.bind(n,69506))},91788:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[455,370,702,671,464,164,193,441,684,358],()=>t(79701)),_N_E=e.O()}]);