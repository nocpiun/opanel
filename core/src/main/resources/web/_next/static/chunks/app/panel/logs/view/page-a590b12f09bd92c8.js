(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{13052:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},24232:(e,t,a)=>{"use strict";a.d(t,{C:()=>h});var n=a(95155);a(12115);var r=a(13052),s=a(53999);function o(e){let{...t}=e;return(0,n.jsx)("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...t})}function i(e){let{className:t,...a}=e;return(0,n.jsx)("ol",{"data-slot":"breadcrumb-list",className:(0,s.cn)("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",t),...a})}function l(e){let{className:t,...a}=e;return(0,n.jsx)("li",{"data-slot":"breadcrumb-item",className:(0,s.cn)("inline-flex items-center gap-1.5",t),...a})}function c(e){let{className:t,...a}=e;return(0,n.jsx)("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:(0,s.cn)("text-foreground font-normal",t),...a})}function d(e){let{children:t,className:a,...o}=e;return(0,n.jsx)("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:(0,s.cn)("[&>svg]:size-3.5",a),...o,children:null!=t?t:(0,n.jsx)(r.A,{})})}var u=a(76037),f=a(20193);function h(e){let{children:t,title:a,subTitle:r,icon:h,className:p,...m}=e;return(0,n.jsxs)("div",{className:"px-16 flex-1 flex flex-col gap-6",children:[(0,n.jsxs)("div",{className:"pt-10 pb-5 flex flex-col gap-8",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(f.SidebarTrigger,{className:"cursor-pointer"}),(0,n.jsx)(u.Separator,{orientation:"vertical"}),(0,n.jsx)(o,{children:(0,n.jsxs)(i,{children:[(0,n.jsx)(l,{children:"OPanel"}),(0,n.jsx)(d,{}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l,{children:a}),(0,n.jsx)(d,{})]}),(0,n.jsx)(l,{children:(0,n.jsx)(c,{children:null!=r?r:a})})]})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-5",children:[h,(0,n.jsx)("h1",{className:"text-3xl font-bold",children:null!=r?r:a})]})]}),(0,n.jsx)("div",{className:(0,s.cn)(p,"pb-16"),...m,children:t})]})}},31886:(e,t,a)=>{"use strict";a.d(t,{$M:()=>h,Hh:()=>c,Kf:()=>u,QM:()=>g,nF:()=>l,nl:()=>m,ow:()=>p,qV:()=>f,v_:()=>d,y0:()=>o,yq:()=>i});var n=a(23464),r=a(16453),s=a(56671);let o="",i=globalThis.window?"ws://".concat(window.location.host):"ws://localhost:3000",l="https://crafatar.com/avatars/",c="https://crafatar.com/skins/",d="https://crafatar.com/capes/";function u(e,t,a){for(let[n,r]of a)if(e.status===n)return void s.oR.error(t,{description:r});s.oR.error(t,{description:e.message})}async function f(e){return(await n.A.request({method:"get",url:o+e,headers:{"X-Credential-Token":(0,r.getCookie)("token")}})).data}async function h(e,t){let a=t?JSON.stringify(t):"";return(await n.A.request({method:"post",maxBodyLength:1/0,url:o+e,headers:{"Content-Type":"text/plain"},data:a})).data}async function p(e,t){let a=t?JSON.stringify(t):"";return(await n.A.request({method:"post",maxBodyLength:1/0,url:o+e,headers:{"Content-Type":"text/plain","X-Credential-Token":(0,r.getCookie)("token")},data:a})).data}async function m(e,t){let a=t?JSON.stringify(t):"";return(await n.A.request({method:"delete",maxBodyLength:1/0,url:o+e,headers:{"Content-Type":"text/plain","X-Credential-Token":(0,r.getCookie)("token")},data:a})).data}async function g(e,t,a){let s=new FormData;return s.append("file",t),(await n.A.request({method:"post",url:o+e,headers:{"Content-Type":"multipart/form-data","X-Credential-Token":(0,r.getCookie)("token")},data:s,onUploadProgress:e=>{var t;return a&&a(null!=(t=e.progress)?t:0)}})).data}},32007:(e,t,a)=>{"use strict";a.d(t,{S:()=>l,f:()=>i});var n=a(42757),r=a.n(n),s=a(56671),o=a(31886);async function i(e){let t=e.endsWith(".log.gz")?e.replace(".log.gz",".log"):e;try{let a=await (0,o.qV)("/api/logs/".concat(e));r()(a,t,"text/plain")}catch(e){(0,o.Kf)(e,"无法下载日志 ".concat(t),[[401,"未登录"],[404,"找不到该日志"]])}}async function l(e){try{await (0,o.nl)("/api/logs/".concat(e)),s.oR.success("删除成功")}catch(e){(0,o.Kf)(e,"无法删除日志",[[400,"请求参数错误"],[401,"未登录"],[404,"找不到该日志"]])}}},35695:(e,t,a)=>{"use strict";var n=a(18999);a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(t,{useSearchParams:function(){return n.useSearchParams}})},42757:function(e,t){var a,n;void 0===(n="function"==typeof(a=function(){return function e(t,a,n){var r,s,o=window,i="application/octet-stream",l=n||i,c=t,d=!a&&!n&&c,u=document.createElement("a"),f=function(e){return String(e)},h=o.Blob||o.MozBlob||o.WebKitBlob||f,p=a||"download";if(h=h.call?h.bind(o):Blob,"true"===String(this)&&(l=(c=[c,l])[0],c=c[1]),d&&d.length<2048&&(p=d.split("/").pop().split("?")[0],u.href=d,-1!==u.href.indexOf(d))){var m=new XMLHttpRequest;return m.open("GET",d,!0),m.responseType="blob",m.onload=function(t){e(t.target.response,p,i)},setTimeout(function(){m.send()},0),m}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c))if(!(c.length>2096103.424)||h===f)return navigator.msSaveBlob?navigator.msSaveBlob(v(c),p):b(c);else l=(c=v(c)).type||i;else if(/([\x80-\xff])/.test(c)){for(var g=0,x=new Uint8Array(c.length),y=x.length;g<y;++g)x[g]=c.charCodeAt(g);c=new h([x],{type:l})}function v(e){for(var t=e.split(/[:;,]/),a=t[1],n=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),r=n.length,s=0,o=new Uint8Array(r);s<r;++s)o[s]=n.charCodeAt(s);return new h([o],{type:a})}function b(e,t){if("download"in u)return u.href=e,u.setAttribute("download",p),u.className="download-js-link",u.innerHTML="downloading...",u.style.display="none",document.body.appendChild(u),setTimeout(function(){u.click(),document.body.removeChild(u),!0===t&&setTimeout(function(){o.URL.revokeObjectURL(u.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,i)),!window.open(e)&&confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var a=document.createElement("iframe");document.body.appendChild(a),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,i)),a.src=e,setTimeout(function(){document.body.removeChild(a)},333)}if(r=c instanceof h?c:new h([c],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(r,p);if(o.URL)b(o.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===f)try{return b("data:"+l+";base64,"+o.btoa(r))}catch(e){return b("data:"+l+","+encodeURIComponent(r))}(s=new FileReader).onload=function(e){b(this.result)},s.readAsDataURL(r)}return!0}})?a.apply(t,[]):a)||(e.exports=n)},62525:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(19946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},69506:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(95155),r=a(12115),s=a(91788),o=a(62525),i=a(35695),l=a(91364),c=a(51362),d=a(24232),u=a(31886),f=a(97168),h=a(32007);function p(){let e=(0,i.useSearchParams)(),{push:t}=(0,i.useRouter)(),[a,p]=(0,r.useState)(""),{theme:m}=(0,c.D)(),g=(0,r.useRef)(null),x=e.get("log"),y=(0,r.useCallback)(async()=>{try{let e=await (0,u.qV)("/api/logs/".concat(x));p(e)}catch(e){(0,u.Kf)(e,"无法获取日志内容",[[400,"请求参数错误"],[401,"未登录"],[404,"找不到该日志"],[500,"服务器内部错误"]])}},[x]);return(0,r.useEffect)(()=>{g.current&&g.current.setValue(a)},[a]),(0,r.useEffect)(()=>{y()},[y]),x||t("/panel/logs"),(0,n.jsxs)(d.C,{title:"日志",subTitle:null!=x?x:"",children:[(0,n.jsxs)("div",{className:"mb-3 flex justify-between items-center",children:[(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:["文件类型：",(null==x?void 0:x.endsWith(".log.gz"))?"gzip (已解压)":"log"]}),(0,n.jsxs)("div",{className:"[&>*]:cursor-pointer",children:[(0,n.jsx)(f.$,{variant:"ghost",size:"icon",title:"下载日志",onClick:()=>(0,h.f)(null!=x?x:""),children:(0,n.jsx)(s.A,{})}),(0,n.jsx)(f.$,{variant:"ghost",size:"icon",title:"删除日志",onClick:async()=>{await (0,h.S)(null!=x?x:""),t("/panel/logs")},children:(0,n.jsx)(o.A,{})})]})]}),(0,n.jsx)(l.Ay,{height:"500px",defaultLanguage:"txt",defaultValue:a,theme:"dark"===m?"vs-dark":"vs",options:{readOnly:!0,readOnlyMessage:{value:"日志不可编辑"}},onMount:e=>g.current=e})]})}},79701:(e,t,a)=>{Promise.resolve().then(a.bind(a,69506))},91788:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[455,516,370,671,464,647,193,441,684,358],()=>t(79701)),_N_E=e.O()}]);