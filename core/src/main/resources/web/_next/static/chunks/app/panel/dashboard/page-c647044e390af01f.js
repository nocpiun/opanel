(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[156],{2836:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>ed});var l=t(5155),n=t(2115),s=t(8611),a=t(6671),c=t(3052),o=t(1907);function i(e){let{...r}=e;return(0,l.jsx)("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...r})}function d(e){let{className:r,...t}=e;return(0,l.jsx)("ol",{"data-slot":"breadcrumb-list",className:(0,o.cn)("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",r),...t})}function u(e){let{className:r,...t}=e;return(0,l.jsx)("li",{"data-slot":"breadcrumb-item",className:(0,o.cn)("inline-flex items-center gap-1.5",r),...t})}function x(e){let{className:r,...t}=e;return(0,l.jsx)("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:(0,o.cn)("text-foreground font-normal",r),...t})}function m(e){let{children:r,className:t,...n}=e;return(0,l.jsx)("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:(0,o.cn)("[&>svg]:size-3.5",t),...n,children:null!=r?r:(0,l.jsx)(c.A,{})})}var f=t(6037),h=t(1196);function p(e){let{children:r,title:t,icon:n,className:s}=e;return(0,l.jsxs)("div",{className:"px-16 flex-1 flex flex-col gap-6",children:[(0,l.jsxs)("div",{className:"py-10 flex flex-col gap-8",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(h.SidebarTrigger,{className:"cursor-pointer"}),(0,l.jsx)(f.Separator,{orientation:"vertical"}),(0,l.jsx)(i,{children:(0,l.jsxs)(d,{children:[(0,l.jsx)(u,{children:"OPanel"}),(0,l.jsx)(m,{}),(0,l.jsx)(u,{children:(0,l.jsx)(x,{children:t})})]})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-5",children:[n,(0,l.jsx)("h1",{className:"text-3xl font-bold",children:t})]})]}),(0,l.jsx)("div",{className:s,children:r})]})}let j=function(){let e=n.createContext(void 0);return e.displayName="APIContext",e}();var v=t(8482),g=t(7777),b=t(7469),N=t(4608),y=t.n(N);let w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],k=["k","l","m","n","o"],_="|i!:;.";function C(e){return" "===e?" ":_.includes(e)?(0,o.gI)(_.split("")):(0,o.gI)("+/\\=023456789ABCDEFGHJKLMNOPQRSTUVWXYZabcdeghjmnopqrsuvwxyz\xa2\xa3\xa5\xb1\xb5\xc0\xc1\xc2\xc3\xc4\xc5\xc7\xd1\xd2\xd3\xd4\xd5\xd6\xd7\xd8\xd9\xda\xdb\xdc\xdd\xeb".split(""))}function A(e){let{children:r,className:t}=e,s=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(s.current)for(let e of(s.current.innerHTML="",s.current.appendChild(function(e){let r=e.replaceAll("\xc2",""),t=document.createElement("span");t.className="cc-root";let l=t;for(let e=0;e<r.length;e++){let n=r[e];if("\xa7"===n){let n=r[e+1];if("r"===n){l=t,e++;continue}let s=w.includes(n),a=k.includes(n);if(!s&&!a)continue;s&&(l=t);let c=document.createElement("span");c.className="cc-".concat(n),l.appendChild(c),l=c,e++}else l.innerHTML+=n}return t}(r)),s.current.getElementsByClassName("cc-k")))e instanceof HTMLSpanElement&&function(e){let r=e.innerText,t=()=>{e.innerText=Array.from(r).map(C).join(""),requestAnimationFrame(t)};requestAnimationFrame(t)}(e)},[r]),(0,l.jsx)("div",{className:(0,o.cn)(t,y().className),ref:s})}let E={src:"/_next/static/media/pack.3fda983d.png"};function I(e){let{className:r}=e,t=(0,n.useContext)(j);return(0,l.jsxs)(v.Zp,{className:(0,o.cn)(r,"flex flex-row rounded-md"),children:[(0,l.jsx)("img",{className:"aspect-square h-full rounded-xs",src:t&&t.favicon?b.y+t.favicon:E.src,alt:"favicon"}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col gap-1",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center *:text-nowrap",children:[(0,l.jsxs)("div",{className:"flex gap-4 [&>*]:space-x-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold",children:"IP:"}),t&&t.ip?(0,l.jsx)("span",{children:t.ip}):(0,l.jsx)("span",{className:"text-muted-foreground italic",children:"未设置"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold",children:"端口:"}),(0,l.jsx)("span",{className:"text-emerald-500 font-[Consolas]",children:t?t.port:""})]})]}),(0,l.jsx)("div",{className:"pr-2",children:(0,l.jsxs)(g.m_,{children:[(0,l.jsx)(g.k$,{children:(0,l.jsx)("div",{className:(0,o.cn)("w-2 h-2 rounded-full",t?"bg-green-600":"bg-red-700")})}),(0,l.jsx)(g.ZI,{children:(0,l.jsx)("p",{children:t?"正在运行":"未运行"})})]})})]}),(0,l.jsx)("div",{className:"flex-1",children:t&&(0,l.jsx)(A,{children:atob(t.motd)})})]})]})}var L=t(7580),P=t(5196),S=t(6874),T=t.n(S),H=t(7168);function M(e){let{title:r,moreLink:t,className:n,innerClassName:s,children:a,...i}=e;return(0,l.jsxs)(v.Zp,{className:(0,o.cn)(n,"!p-0 flex flex-col gap-3 rounded-md"),children:[(0,l.jsxs)("div",{className:"p-4 pb-0 flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 pl-2",children:[(0,l.jsx)(i.icon,{size:20}),(0,l.jsx)("h2",{className:"text-lg font-semibold",children:r})]}),t&&(0,l.jsx)(H.$,{variant:"ghost",size:"sm",className:"text-muted-foreground cursor-pointer",asChild:!0,children:(0,l.jsxs)(T(),{href:t,children:["更多",(0,l.jsx)(c.A,{})]})})]}),(0,l.jsx)("div",{className:(0,o.cn)(s,"overflow-auto"),children:a})]})}var Z=t(8524);function q(e){let{className:r}=e,t=(0,n.useContext)(j);return(0,l.jsx)(M,{icon:L.A,title:"在线玩家 (".concat(t?t.onlinePlayers.length:0,")"),moreLink:"/panel/players",className:r,innerClassName:"p-4 pt-0",children:(0,l.jsxs)(Z.XI,{children:[(0,l.jsx)(Z.A0,{children:(0,l.jsxs)(Z.Hj,{children:[(0,l.jsx)(Z.nd,{children:"玩家"}),(0,l.jsx)(Z.nd,{className:"text-center",children:"游戏模式"}),(0,l.jsx)(Z.nd,{className:"text-right",children:"OP"})]})}),(0,l.jsx)(Z.BF,{children:t&&t.onlinePlayers.map((e,r)=>{let{name:t,uuid:n,isOp:s,gameMode:a}=e;return(0,l.jsxs)(Z.Hj,{children:[(0,l.jsx)(Z.nA,{className:"font-semibold",children:(0,l.jsxs)(g.m_,{children:[(0,l.jsx)(g.k$,{children:t}),(0,l.jsx)(g.ZI,{children:n})]})}),(0,l.jsx)(Z.nA,{className:"text-center",children:(0,o.Cq)(a)}),(0,l.jsx)(Z.nA,{className:"[&>svg]:float-right",children:s?(0,l.jsx)(P.A,{size:18,color:"var(--color-muted-foreground)"}):(0,l.jsx)(l.Fragment,{})})]},r)})})]})})}var F=t(4648),O=t(1392),B=t(8218),z=t(3323);let G=[{name:"存档",url:"/panel/worlds",icon:F.A},{name:"游戏规则",url:"/panel/gamerules",icon:O.A},{name:"插件",url:"/panel/plugins",icon:B.A},{name:"日志",url:"/panel/logs",icon:z.A}];function K(e){let{className:r}=e;return(0,l.jsx)(v.Zp,{className:(0,o.cn)(r,"flex flex-row gap-2 rounded-md"),children:G.map((e,r)=>(0,l.jsx)(H.$,{className:"h-full flex flex-1 flex-col",variant:"ghost",asChild:!0,children:(0,l.jsxs)(T(),{href:e.url,children:[(0,l.jsx)(e.icon,{className:"!w-6 !h-6"}),(0,l.jsx)("span",{children:e.name})]})},r))})}var R=t(8247),W=t(3406),$=t(7156),V=t(6697),X=t(3540),J=t(8124),Q=t(2319);let U={light:"",dark:".dark"},D=n.createContext(null);function Y(e){let{id:r,className:t,children:s,config:a,...c}=e,i=n.useId(),d="chart-".concat(null!=r?r:i.replace(/:/g,""));return(0,l.jsx)(D.Provider,{value:{config:a},children:(0,l.jsxs)("div",{"data-slot":"chart","data-chart":d,className:(0,o.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",t),...c,children:[(0,l.jsx)(ee,{id:d,config:a}),(0,l.jsx)(X.u,{children:s})]})})}let ee=e=>{let{id:r,config:t}=e,n=Object.entries(t).filter(e=>{var r;let[,t]=e;return null!=(r=t.theme)?r:t.color});return n.length?(0,l.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(U).map(e=>{let[t,l]=e;return"\n".concat(l," [data-chart=").concat(r,"] {\n").concat(n.map(e=>{var r,l;let[n,s]=e,a=null!=(l=null==(r=s.theme)?void 0:r[t])?l:s.color;return a?"  --color-".concat(n,": ").concat(a,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},er=J.m;function et(e){let{active:r,className:t,indicator:s="dot",hideLabel:a=!1,hideIndicator:c=!1,labelFormatter:i,labelClassName:d,formatter:u,color:x,nameKey:m,labelKey:f,payload:h,label:p}=e,{config:j}=function(){let e=n.useContext(D);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}(),v=n.useMemo(()=>{var e,r,t,n;if(a||!(null==h?void 0:h.length))return null;let[s]=h,c="".concat(null!=(t=null!=(r=null!=f?f:null==s?void 0:s.dataKey)?r:null==s?void 0:s.name)?t:"value"),u=el(j,s,c),x=f||"string"!=typeof p?null==u?void 0:u.label:null!=(n=null==(e=j[p])?void 0:e.label)?n:p;return i?(0,l.jsx)("div",{className:(0,o.cn)("font-medium",d),children:i(x,h)}):x?(0,l.jsx)("div",{className:(0,o.cn)("font-medium",d),children:x}):null},[j,a,p,d,i,f,h]);if(!r||!(null==h?void 0:h.length))return null;let g=1===h.length&&"dot"!==s;return(0,l.jsxs)("div",{className:(0,o.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",t),children:[g?null:v,(0,l.jsx)("div",{className:"grid gap-1.5",children:h.map((e,r)=>{var t,n,a,i,d;let f="".concat(null!=(a=null!=(n=null!=m?m:e.name)?n:e.dataKey)?a:"value"),h=el(j,e,f),p=null!=(i=null!=x?x:null==(t=e.payload)?void 0:t.fill)?i:e.color;return(0,l.jsx)("div",{className:(0,o.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===s&&"items-center"),children:u&&(null==e?void 0:e.value)!==void 0&&e.name?u(e.value,e.name,e,r,e.payload):(0,l.jsxs)(l.Fragment,{children:[(null==h?void 0:h.icon)?(0,l.jsx)(h.icon,{}):!c&&(0,l.jsx)("div",{className:(0,o.cn)("shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)",{"h-2.5 w-2.5":"dot"===s,"w-1":"line"===s,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===s,"my-0.5":g&&"dashed"===s}),style:{"--color-bg":p,"--color-border":p}}),(0,l.jsxs)("div",{className:(0,o.cn)("flex flex-1 justify-between leading-none",g?"items-end":"items-center"),children:[(0,l.jsxs)("div",{className:"grid gap-1.5",children:[g?v:null,(0,l.jsx)("span",{className:"text-muted-foreground",children:null!=(d=null==h?void 0:h.label)?d:e.name})]}),null!=e.value&&(0,l.jsx)("span",{className:"font-mono font-medium text-foreground tabular-nums",children:"number"==typeof e.value?e.value.toLocaleString():String(e.value)})]})]})},r)})})]})}function el(e,r,t){if("object"!=typeof r||null===r)return;let l="payload"in r&&"object"==typeof r.payload&&null!==r.payload?r.payload:void 0,n=t;return t in r&&"string"==typeof r[t]?n=r[t]:l&&t in l&&"string"==typeof l[t]&&(n=l[t]),n in e?e[n]:e[t]}Q.s;let en={memory:{label:"内存占用"},cpu:{label:"CPU占用"}};function es(e){let{className:r}=e,[t,s]=(0,n.useState)(Array(50).fill({memory:0,cpu:0})),a=async()=>{let e=[...await (0,o.LJ)(s)],{mem:r,cpu:t}=await (0,o.qV)("/api/monitor");e.shift(),e.push({memory:r,cpu:t}),s(e)};return(0,n.useEffect)(()=>{let e=setInterval(()=>{a()},2e3);return()=>clearInterval(e)},[]),(0,l.jsx)(M,{icon:V.A,title:"资源监控",className:(0,o.cn)(r,"justify-between"),innerClassName:"!overflow-hidden",children:(0,l.jsx)(Y,{config:en,className:"w-full max-h-96",children:(0,l.jsxs)(R.Q,{accessibilityLayer:!0,data:t,margin:{left:0,right:0,bottom:80},children:[(0,l.jsx)(W.d,{vertical:!1,stroke:"var(--border)"}),(0,l.jsx)($.Gk,{dataKey:"memory",type:"monotone",fill:"url(#fillMemory)",stroke:"var(--color-chart-2)",strokeWidth:"2",isAnimationActive:!1}),(0,l.jsx)($.Gk,{dataKey:"cpu",type:"monotone",fill:"url(#fillCpu)",stroke:"var(--color-foreground)",strokeWidth:"2",isAnimationActive:!1}),(0,l.jsx)(er,{cursor:!1,content:(0,l.jsx)(et,{hideLabel:!0,indicator:"line"})}),(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"fillMemory",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,l.jsx)("stop",{offset:"10%",stopColor:"var(--color-chart-2)"}),(0,l.jsx)("stop",{offset:"90%",stopColor:"var(--color-card)"})]})}),(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"fillCpu",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,l.jsx)("stop",{offset:"10%",stopColor:"var(--color-foreground)"}),(0,l.jsx)("stop",{offset:"90%",stopColor:"var(--color-card)"})]})})]})})})}var ea=t(5695),ec=t(2978),eo=t(9852);function ei(e){let{className:r}=e,{push:t}=(0,ea.useRouter)();return(0,l.jsxs)(M,{icon:ec.A,title:"服务器后台",moreLink:"/panel/terminal",className:r,innerClassName:"p-2 pt-0 h-full flex flex-col gap-2 overflow-hidden",children:[(0,l.jsx)("div",{className:"flex-1 w-full border rounded-sm bg-background overflow-auto p-2 [&>p]:text-xs [&>p]:font-[monospace]"}),(0,l.jsx)(eo.p,{className:"w-full rounded-sm",placeholder:"发送消息 / 指令...",onClick:()=>t("/panel/terminal")})]})}function ed(){let[e,r]=(0,n.useState)(),t=async()=>{try{let e=await (0,o.qV)("/api/info");r(e)}catch(e){a.oR.error("无法连接到服务器",{description:"错误：".concat(e)})}};return(0,n.useEffect)(()=>{t()},[]),(0,l.jsx)(p,{title:"仪表盘",icon:(0,l.jsx)(s.A,{}),className:"h-[500px] grid grid-rows-3 grid-cols-3 gap-3 pb-20 [&>*]:p-4",children:(0,l.jsxs)(j.Provider,{value:e,children:[(0,l.jsx)(I,{className:"row-start-1"}),(0,l.jsx)(q,{className:"row-span-2 row-start-2"}),(0,l.jsx)(K,{className:"row-start-1"}),(0,l.jsx)(es,{className:"row-span-2 row-start-2"}),(0,l.jsx)(ei,{className:"row-span-3 rounded-md"})]})})}},4133:(e,r,t)=>{Promise.resolve().then(t.bind(t,2836))},8482:(e,r,t)=>{"use strict";t.d(r,{BT:()=>o,Wu:()=>i,ZB:()=>c,Zp:()=>s,aR:()=>a,wL:()=>d});var l=t(5155);t(2115);var n=t(1907);function s(e){let{className:r,...t}=e;return(0,l.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...t})}function a(e){let{className:r,...t}=e;return(0,l.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...t})}function c(e){let{className:r,...t}=e;return(0,l.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",r),...t})}function o(e){let{className:r,...t}=e;return(0,l.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",r),...t})}function i(e){let{className:r,...t}=e;return(0,l.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",r),...t})}function d(e){let{className:r,...t}=e;return(0,l.jsx)("div",{"data-slot":"card-footer",className:(0,n.cn)("flex items-center px-6 [.border-t]:pt-6",r),...t})}},8524:(e,r,t)=>{"use strict";t.d(r,{A0:()=>a,BF:()=>c,Hj:()=>o,XI:()=>s,nA:()=>d,nd:()=>i});var l=t(5155);t(2115);var n=t(1907);function s(e){let{className:r,...t}=e;return(0,l.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,l.jsx)("table",{"data-slot":"table",className:(0,n.cn)("w-full caption-bottom text-sm",r),...t})})}function a(e){let{className:r,...t}=e;return(0,l.jsx)("thead",{"data-slot":"table-header",className:(0,n.cn)("[&_tr]:border-b",r),...t})}function c(e){let{className:r,...t}=e;return(0,l.jsx)("tbody",{"data-slot":"table-body",className:(0,n.cn)("[&_tr:last-child]:border-0",r),...t})}function o(e){let{className:r,...t}=e;return(0,l.jsx)("tr",{"data-slot":"table-row",className:(0,n.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",r),...t})}function i(e){let{className:r,...t}=e;return(0,l.jsx)("th",{"data-slot":"table-head",className:(0,n.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...t})}function d(e){let{className:r,...t}=e;return(0,l.jsx)("td",{"data-slot":"table-cell",className:(0,n.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...t})}}},e=>{var r=r=>e(e.s=r);e.O(0,[384,702,64,844,874,671,964,196,441,684,358],()=>r(4133)),_N_E=e.O()}]);