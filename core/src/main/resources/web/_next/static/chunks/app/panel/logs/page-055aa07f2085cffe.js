(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{13052:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},17649:(e,t,a)=>{"use strict";a.d(t,{UC:()=>V,VY:()=>U,ZD:()=>O,ZL:()=>T,bL:()=>M,hE:()=>B,hJ:()=>L,l9:()=>P,rc:()=>H});var n=a(12115),r=a(46081),s=a(6101),l=a(15452),o=a(85185),i=a(99708),c=a(95155),d="AlertDialog",[u,h]=(0,r.A)(d,[l.Hs]),x=(0,l.Hs)(),p=e=>{let{__scopeAlertDialog:t,...a}=e,n=x(t);return(0,c.jsx)(l.bL,{...n,...a,modal:!0})};p.displayName=d;var f=n.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...n}=e,r=x(a);return(0,c.jsx)(l.l9,{...r,...n,ref:t})});f.displayName="AlertDialogTrigger";var m=e=>{let{__scopeAlertDialog:t,...a}=e,n=x(t);return(0,c.jsx)(l.ZL,{...n,...a})};m.displayName="AlertDialogPortal";var g=n.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...n}=e,r=x(a);return(0,c.jsx)(l.hJ,{...r,...n,ref:t})});g.displayName="AlertDialogOverlay";var v="AlertDialogContent",[j,b]=u(v),y=(0,i.Dc)("AlertDialogContent"),w=n.forwardRef((e,t)=>{let{__scopeAlertDialog:a,children:r,...i}=e,d=x(a),u=n.useRef(null),h=(0,s.s)(t,u),p=n.useRef(null);return(0,c.jsx)(l.G$,{contentName:v,titleName:N,docsSlug:"alert-dialog",children:(0,c.jsx)(j,{scope:a,cancelRef:p,children:(0,c.jsxs)(l.UC,{role:"alertdialog",...d,...i,ref:h,onOpenAutoFocus:(0,o.m)(i.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=p.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,c.jsx)(y,{children:r}),(0,c.jsx)(z,{contentRef:u})]})})})});w.displayName=v;var N="AlertDialogTitle",k=n.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...n}=e,r=x(a);return(0,c.jsx)(l.hE,{...r,...n,ref:t})});k.displayName=N;var A="AlertDialogDescription",C=n.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...n}=e,r=x(a);return(0,c.jsx)(l.VY,{...r,...n,ref:t})});C.displayName=A;var R=n.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...n}=e,r=x(a);return(0,c.jsx)(l.bm,{...r,...n,ref:t})});R.displayName="AlertDialogAction";var D="AlertDialogCancel",S=n.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...n}=e,{cancelRef:r}=b(D,a),o=x(a),i=(0,s.s)(t,r);return(0,c.jsx)(l.bm,{...o,...n,ref:i})});S.displayName=D;var z=e=>{let{contentRef:t}=e,a="`".concat(v,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(v,"` by passing a `").concat(A,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(v,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return n.useEffect(()=>{var e;document.getElementById(null==(e=t.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(a)},[a,t]),null},M=p,P=f,T=m,L=g,V=w,H=R,O=S,B=k,U=C},23323:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(19946).A)("scroll-text",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]])},24232:(e,t,a)=>{"use strict";a.d(t,{C:()=>x});var n=a(95155);a(12115);var r=a(13052),s=a(53999);function l(e){let{...t}=e;return(0,n.jsx)("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...t})}function o(e){let{className:t,...a}=e;return(0,n.jsx)("ol",{"data-slot":"breadcrumb-list",className:(0,s.cn)("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",t),...a})}function i(e){let{className:t,...a}=e;return(0,n.jsx)("li",{"data-slot":"breadcrumb-item",className:(0,s.cn)("inline-flex items-center gap-1.5",t),...a})}function c(e){let{className:t,...a}=e;return(0,n.jsx)("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:(0,s.cn)("text-foreground font-normal",t),...a})}function d(e){let{children:t,className:a,...l}=e;return(0,n.jsx)("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:(0,s.cn)("[&>svg]:size-3.5",a),...l,children:null!=t?t:(0,n.jsx)(r.A,{})})}var u=a(76037),h=a(20193);function x(e){let{children:t,title:a,subTitle:r,icon:x,className:p,...f}=e;return(0,n.jsxs)("div",{className:"px-16 flex-1 flex flex-col gap-6",children:[(0,n.jsxs)("div",{className:"pt-10 pb-5 flex flex-col gap-8",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(h.SidebarTrigger,{className:"cursor-pointer"}),(0,n.jsx)(u.Separator,{orientation:"vertical"}),(0,n.jsx)(l,{children:(0,n.jsxs)(o,{children:[(0,n.jsx)(i,{children:"OPanel"}),(0,n.jsx)(d,{}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i,{children:a}),(0,n.jsx)(d,{})]}),(0,n.jsx)(i,{children:(0,n.jsx)(c,{children:null!=r?r:a})})]})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-5",children:[x,(0,n.jsx)("h1",{className:"text-3xl font-bold",children:null!=r?r:a})]})]}),(0,n.jsx)("div",{className:(0,s.cn)(p,"pb-16"),...f,children:t})]})}},27450:(e,t,a)=>{"use strict";a.d(t,{F:()=>v});var n=a(95155);a(12115);var r=a(17649),s=a(53999),l=a(97168);function o(e){let{...t}=e;return(0,n.jsx)(r.bL,{"data-slot":"alert-dialog",...t})}function i(e){let{...t}=e;return(0,n.jsx)(r.l9,{"data-slot":"alert-dialog-trigger",...t})}function c(e){let{...t}=e;return(0,n.jsx)(r.ZL,{"data-slot":"alert-dialog-portal",...t})}function d(e){let{className:t,...a}=e;return(0,n.jsx)(r.hJ,{"data-slot":"alert-dialog-overlay",className:(0,s.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function u(e){let{className:t,...a}=e;return(0,n.jsxs)(c,{children:[(0,n.jsx)(d,{}),(0,n.jsx)(r.UC,{"data-slot":"alert-dialog-content",className:(0,s.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function h(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,s.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function x(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,s.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function p(e){let{className:t,...a}=e;return(0,n.jsx)(r.hE,{"data-slot":"alert-dialog-title",className:(0,s.cn)("text-lg font-semibold",t),...a})}function f(e){let{className:t,...a}=e;return(0,n.jsx)(r.VY,{"data-slot":"alert-dialog-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...a})}function m(e){let{className:t,...a}=e;return(0,n.jsx)(r.rc,{className:(0,s.cn)((0,l.r)(),t),...a})}function g(e){let{className:t,...a}=e;return(0,n.jsx)(r.ZD,{className:(0,s.cn)((0,l.r)({variant:"outline"}),t),...a})}function v(e){let{title:t,description:a,cancellable:r=!0,onAction:s,asChild:l,children:c}=e;return(0,n.jsxs)(o,{children:[(0,n.jsx)(i,{asChild:l,children:c}),(0,n.jsxs)(u,{children:[(0,n.jsxs)(h,{children:[(0,n.jsx)(p,{children:t}),a&&(0,n.jsx)(f,{children:a})]}),(0,n.jsxs)(x,{children:[r&&(0,n.jsx)(g,{children:"取消"}),(0,n.jsx)(m,{onClick:()=>{s&&s()},children:"确定"})]})]})]})}},31886:(e,t,a)=>{"use strict";a.d(t,{$M:()=>u,Hh:()=>i,nF:()=>o,nl:()=>x,ow:()=>h,qV:()=>d,v_:()=>c,y0:()=>s,yq:()=>l});var n=a(23464),r=a(16453);let s="",l=globalThis.window?"ws://".concat(window.location.host):"ws://localhost:3000",o="https://crafatar.com/avatars/",i="https://crafatar.com/skins/",c="https://crafatar.com/capes/";async function d(e){return(await n.A.request({method:"get",url:s+e,headers:{"X-Credential-Token":(0,r.getCookie)("token")}})).data}async function u(e,t){let a=t?JSON.stringify(t):"";return(await n.A.request({method:"post",maxBodyLength:1/0,url:s+e,headers:{"Content-Type":"text/plain"},data:a})).data}async function h(e,t){let a=t?JSON.stringify(t):"";return(await n.A.request({method:"post",maxBodyLength:1/0,url:s+e,headers:{"Content-Type":"text/plain","X-Credential-Token":(0,r.getCookie)("token")},data:a})).data}async function x(e,t){let a=t?JSON.stringify(t):"";return(await n.A.request({method:"delete",maxBodyLength:1/0,url:s+e,headers:{"Content-Type":"text/plain","X-Credential-Token":(0,r.getCookie)("token")},data:a})).data}},32007:(e,t,a)=>{"use strict";a.d(t,{S:()=>i,f:()=>o});var n=a(42757),r=a.n(n),s=a(56671),l=a(31886);async function o(e){let t=e.endsWith(".log.gz")?e.replace(".log.gz",".log"):e;try{let a=await (0,l.qV)("/api/logs/".concat(e));r()(a.log,t,"text/plain")}catch(e){s.oR.error("无法下载日志 ".concat(t),{description:e.message})}}async function i(e){try{await (0,l.nl)("/api/logs/".concat(e)),s.oR.success("删除成功")}catch(e){s.oR.error("删除失败",{description:e.message})}}},42757:function(e,t){var a,n;void 0===(n="function"==typeof(a=function(){return function e(t,a,n){var r,s,l=window,o="application/octet-stream",i=n||o,c=t,d=!a&&!n&&c,u=document.createElement("a"),h=function(e){return String(e)},x=l.Blob||l.MozBlob||l.WebKitBlob||h,p=a||"download";if(x=x.call?x.bind(l):Blob,"true"===String(this)&&(i=(c=[c,i])[0],c=c[1]),d&&d.length<2048&&(p=d.split("/").pop().split("?")[0],u.href=d,-1!==u.href.indexOf(d))){var f=new XMLHttpRequest;return f.open("GET",d,!0),f.responseType="blob",f.onload=function(t){e(t.target.response,p,o)},setTimeout(function(){f.send()},0),f}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c))if(!(c.length>2096103.424)||x===h)return navigator.msSaveBlob?navigator.msSaveBlob(j(c),p):b(c);else i=(c=j(c)).type||o;else if(/([\x80-\xff])/.test(c)){for(var m=0,g=new Uint8Array(c.length),v=g.length;m<v;++m)g[m]=c.charCodeAt(m);c=new x([g],{type:i})}function j(e){for(var t=e.split(/[:;,]/),a=t[1],n=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),r=n.length,s=0,l=new Uint8Array(r);s<r;++s)l[s]=n.charCodeAt(s);return new x([l],{type:a})}function b(e,t){if("download"in u)return u.href=e,u.setAttribute("download",p),u.className="download-js-link",u.innerHTML="downloading...",u.style.display="none",document.body.appendChild(u),setTimeout(function(){u.click(),document.body.removeChild(u),!0===t&&setTimeout(function(){l.URL.revokeObjectURL(u.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,o)),!window.open(e)&&confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var a=document.createElement("iframe");document.body.appendChild(a),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,o)),a.src=e,setTimeout(function(){document.body.removeChild(a)},333)}if(r=c instanceof x?c:new x([c],{type:i}),navigator.msSaveBlob)return navigator.msSaveBlob(r,p);if(l.URL)b(l.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===h)try{return b("data:"+i+";base64,"+l.btoa(r))}catch(e){return b("data:"+i+","+encodeURIComponent(r))}(s=new FileReader).onload=function(e){b(this.result)},s.readAsDataURL(r)}return!0}})?a.apply(t,[]):a)||(e.exports=n)},49982:(e,t,a)=>{Promise.resolve().then(a.bind(a,90854))},62108:(e,t,a)=>{"use strict";a.d(t,{b:()=>p});var n=a(95155),r=a(12115),s=a(52278),l=a(42355),o=a(13052),i=a(12767),c=a(36268),d=a(11032),u=a(88524),h=a(53999),x=a(97168);function p(e){var t;let{columns:a,data:p,pagination:f=!1,fallbackMessage:m="暂无数据",className:g}=e,[v,j]=(0,r.useState)({pageIndex:0,pageSize:10}),b=(0,c.N4)({columns:a,data:p,getCoreRowModel:(0,d.HT)(),getPaginationRowModel:f?(0,d.kW)():void 0,onPaginationChange:j,state:{pagination:v}});return(0,n.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,n.jsx)("div",{className:(0,h.cn)(g,"border rounded-md"),children:(0,n.jsxs)(u.XI,{children:[(0,n.jsx)(u.A0,{children:b.getHeaderGroups().map(e=>(0,n.jsx)(u.Hj,{children:e.headers.map(e=>(0,n.jsx)(u.nd,{children:e.isPlaceholder?null:(0,c.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,n.jsx)(u.BF,{children:(null==(t=b.getRowModel().rows)?void 0:t.length)?b.getRowModel().rows.map(e=>(0,n.jsx)(u.Hj,{children:e.getVisibleCells().map(e=>(0,n.jsx)(u.nA,{children:(0,c.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,n.jsx)(u.Hj,{className:"hover:bg-transparent",children:(0,n.jsx)(u.nA,{colSpan:a.length,className:"h-24 text-center",children:m})})})]})}),f&&(0,n.jsxs)("div",{className:"flex gap-3 items-center [&>button]:cursor-pointer",children:[(0,n.jsx)(x.$,{variant:"outline",size:"icon",title:"跳转至第一页",onClick:()=>b.firstPage(),disabled:!b.getCanPreviousPage(),children:(0,n.jsx)(s.A,{})}),(0,n.jsxs)(x.$,{variant:"outline",onClick:()=>b.previousPage(),disabled:!b.getCanPreviousPage(),children:[(0,n.jsx)(l.A,{}),"上一页"]}),(0,n.jsxs)(x.$,{variant:"outline",onClick:()=>b.nextPage(),disabled:!b.getCanNextPage(),children:["下一页",(0,n.jsx)(o.A,{})]}),(0,n.jsx)(x.$,{variant:"outline",size:"icon",title:"跳转至最后一页",onClick:()=>b.lastPage(),disabled:!b.getCanNextPage(),children:(0,n.jsx)(i.A,{})}),(0,n.jsxs)("span",{className:"text-muted-foreground text-sm",children:["第 ",v.pageIndex+1," 页 / 共 ",b.getPageCount()," 页"]})]})]})}},62525:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(19946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},88524:(e,t,a)=>{"use strict";a.d(t,{A0:()=>l,BF:()=>o,Hj:()=>i,XI:()=>s,nA:()=>d,nd:()=>c});var n=a(95155);a(12115);var r=a(53999);function s(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,n.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",t),...a})})}function l(e){let{className:t,...a}=e;return(0,n.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",t),...a})}function o(e){let{className:t,...a}=e;return(0,n.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",t),...a})}function i(e){let{className:t,...a}=e;return(0,n.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function c(e){let{className:t,...a}=e;return(0,n.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function d(e){let{className:t,...a}=e;return(0,n.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}},90854:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var n=a(95155),r=a(12115),s=a(56671),l=a(23323),o=a(62525),i=a(62108),c=a(31886),d=a(97168),u=a(27450),h=a(6874),x=a.n(h),p=a(91788),f=a(32007);let m=[{accessorKey:"name",header:()=>(0,n.jsx)("span",{className:"pl-3",children:"日志"}),cell:e=>{var t;let{row:a}=e,r=null!=(t=a.getValue("name"))?t:"";return(0,n.jsx)(d.$,{variant:"link",size:"sm",className:"h-4 font-semibold",asChild:!0,children:(0,n.jsx)(x(),{href:"/panel/logs/view?log=".concat(r),children:r})})}},{accessorKey:"type",header:"类型",cell:e=>{let{row:t}=e;return(0,n.jsx)("span",{className:"text-muted-foreground",children:t.getValue("type")})}},{header:" ",cell:e=>{let{row:t}=e;return(0,n.jsxs)("div",{className:"flex justify-end [&>*]:h-4 [&>*]:cursor-pointer [&>*]:hover:!bg-transparent",children:[(0,n.jsx)(d.$,{variant:"ghost",size:"icon",title:"下载日志",onClick:()=>{var e;let a=null!=(e=t.getValue("name"))?e:"";(0,f.f)(a)},children:(0,n.jsx)(p.A,{})}),(0,n.jsx)(d.$,{variant:"ghost",size:"icon",title:"删除日志",onClick:async()=>{var e;let a=null!=(e=t.getValue("name"))?e:"";await (0,f.S)(a),window.location.reload()},children:(0,n.jsx)(o.A,{})})]})}}];var g=a(24232);function v(){let[e,t]=(0,r.useState)([]),a=async()=>{try{let e=await (0,c.qV)("/api/logs");t(e.logs)}catch(e){s.oR.error("无法获取日志列表",{description:e.message})}},h=async()=>{try{await (0,c.nl)("/api/logs"),s.oR.success("已清空除当前日志外的所有日志"),window.location.reload()}catch(e){s.oR.error("清空日志失败",{description:e.message})}};return(0,r.useEffect)(()=>{a()},[]),(0,n.jsxs)(g.C,{title:"日志",icon:(0,n.jsx)(l.A,{}),className:"flex flex-col gap-5",children:[(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(u.F,{title:"确定要清空所有日志文件吗？",description:"此操作不会清除当前的服务器日志，但被清空的日志文件将不可恢复。",onAction:()=>h(),asChild:!0,children:(0,n.jsxs)(d.$,{variant:"destructive",className:"cursor-pointer",children:[(0,n.jsx)(o.A,{}),"清空日志"]})})}),(0,n.jsx)(i.b,{columns:m,data:e.map(e=>({name:e,type:".gz"===e.substring(e.lastIndexOf("."))?"gzip":"log"})),pagination:!0,fallbackMessage:"暂无日志",className:"max-h-[500px] overflow-y-auto"})]})}},91788:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[455,702,370,671,464,874,141,193,441,684,358],()=>t(49982)),_N_E=e.O()}]);