plugins {
    id 'com.gradleup.shadow' version '8.3.8'
}

repositories {
    maven {
        name = "papermc"
        url = uri("https://repo.papermc.io/repository/maven-public/")
    }
    maven {
        name = "CodeMC"
        url = uri("https://repo.codemc.io/repository/maven-public/")
    }
}

archivesBaseName = "${rootProject.name}-bukkit"

dependencies {
    implementation project(':core')

    compileOnly 'io.papermc.paper:paper-api:1.21.5-R0.1-SNAPSHOT'
    implementation "de.tr7zw:item-nbt-api:2.15.1"
}

shadowJar {
    archiveBaseName = baseName +"-build"
    archiveClassifier = ''

    relocate 'com.google.gson', 'net.opanel.deps.gson'
    relocate 'org.objectweb.asm', 'net.opanel.deps.objectweb.asm'
    relocate 'de.tr7zw.changeme.nbtapi', 'net.opanel.deps.nbtapi'
}

tasks.named('build') {
    dependsOn tasks.named('shadowJar')
}
